# Unit-тесты

## Это факты уе...кхм, разработчик

1. Тесты — это не долго, не дорого. Это хороший способ экономить на средней дистанции в сколь нибудь большом и среднем проекте. Ваш проект живёт больше трёх месяцев? Вы понимаете, что вам становится сложно ментально держать его модель в голове? Из отдела QA слышны ругательства по поводу значительного увеличения времени на ручное тестирование? Значит пошли первые запахи и пора освежиться unit тестами!

2. Мы не избавляемся от ручного тестирования – компьютеры это всего лишь (пока что) машины. Они могут гарантировать, что конкретные узлы системы (или их совокупность) находятся в рабочем состоянии. Но то, что работа всей системы правильно отображает требования заказчика, может проверить только человек.

3. Возможно тесты вам не нужны когда:

   - Вы проверяете небольшую бизнес логику (на коленочке), которая может и не залететь в продакшен
   - Ваша девушка кричит: "Дорогой, я в стартапе"
   - Ваш кусок фронтенда является ни чем иным, как "первой дозой бесплатно", а вся фишка приложения - огромный, как мой репозиторий, API, выполняющий основную работу.

## E2E или подождём под дождём

Мальчики и девочки любят E2E тесты. Все любят E2E тесты. Заполнил формочку, нажал галочку, получил результат. Однако такой вид тестов отражает максимально внешнее поведение системы, аналогично пользовательскому опыту. Разница лишь в том, что ответ приходит быстрее. И меньше разочарованных клиентов стучится к вам в поддержку. Поэтому когда ваш ответ на действия в формочке (зелёная галочка) сменится на что-то другое (зелёная какашка), вам останется пожелать удачи для установления, а что же точно сломало эту систему. Ну а бизнесу можно сразу соболезновать - ведь если сломалась, например, формочка для принятия платежей, то... уф, даже страшно представить!

Но если результаты работы E2E тестов быстрее чем пользовательский опыт - это не означает, что эти типы тестов в принципе быстрые. Средний тест, проверяющий работу простой формочки логинизации, составляет от 5 секунд (в среднем). А теперь представим, что у нас 1000 таких тестов. Интересно, как быстро вы начнёте ненавидеть девопсов, когда такие тесты, будут запускаться на каждый чих в мастер (спойлер: быстрее чем ваш кофе остынет). 

А ведь чем меньше тесты запускаются, тем меньше ценности они имеют! Отсюда правило - E2E пишут только на ключевое поведение системы и кол-во такого типа тестов в проекте должно быть, как можно меньше.
