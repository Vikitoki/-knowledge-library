# Математика

## Числа

- Обычные числа в JavaScript хранятся в 64-битном формате IEEE-754, который также называют «числа с плавающей точкой двойной точности» (double precision floating point numbers). Это числа, которые мы будем использовать чаще всего. Мы поговорим о них в этой главе.

- Числовой формат IEEE-754 решает проблему манипуляции с дробными числами путём округления до ближайшего возможного числа. Правила округления обычно не позволяют нам увидеть эту «крошечную потерю точности», но она ВСЕГДА существует.

- Функция parseInt() имеет необязательный второй параметр. Он определяет систему счисления, таким образом parseInt может также читать строки с шестнадцатеричными числами, двоичными числами и т.д.:

  ```js
  alert(parseInt("0xff", 16)); // 255
  alert(parseInt("ff", 16)); // 255, без 0x тоже работает

  alert(parseInt("2n9c", 36)); // 123456
  ```

- Math.random()
  Возвращает псевдослучайное число в диапазоне от 0 (включительно) до 1 (но не включая 1). Поэтому, не стоит забывать, что число 0 - это тоже возможный вариант событий!

- Методы Math.round и toFixed, согласно документации, округляют до ближайшего целого числа: 0..4 округляется в меньшую сторону, тогда как 5..9 в большую сторону.

  ```js
  alert((1.35).toFixed(1)); // 1.4
  alert((6.35).toFixed(1)); // 6.3
  ```

  _Вопрос_: что произошло с 6.35?
  _Ответ_: Во внутреннем двоичном представлении 6.35 является бесконечной двоичной дробью. Хранится она с потерей точности:

  ```js
  alert((6.35).toFixed(20)); // 6.34999999999999964473
  alert((1.35).toFixed(20)); // 1.35000000000000008882
  ```

  Потеря точности может как увеличивать, так и уменьшать число. В случае c 6.35 число становится чуть меньше, поэтому оно округляется в меньшую сторону. Каким образом можно исправить ошибку в округлении числа 6.35? Написать собственную функцию для точного округления чисел:

  ```js
  function exactRound(number) {
    Math.round(number * 10) / 10;
  }

  exactRound(6.35); // 6.35 -> 63.5 -> 64(rounded) -> 6.4
  ```

  Обратите внимание, что для числа 63.5 не происходит потери точности. Дело в том, что десятичная часть 0.5 на самом деле 1/2. Дробные числа, делённые на степень 2, точно представлены в двоичной системе, теперь мы можем округлить число.
