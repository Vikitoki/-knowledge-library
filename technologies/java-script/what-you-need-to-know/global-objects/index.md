# Глобальные объекты

## Date

1. `new Date()`. Без аргументов – создаёт объект Date с текущими датой и временем:

   ```js
   let now = new Date();
   alert(now); // показывает текущие дату и время
   ```

2. `new Date(number)`. Создаёт объект Date с временем, равным количеству миллисекунд (тысячная доля секунды), прошедших с 1 января 1970 года.

   ```js
   // UTC+0 - это лондонское время без перехода на летнее время.

   // 0 соответствует 01.01.1970 UTC+0
   let Jan01_1970 = new Date(0);

   // теперь добавим 24 часа и получим 02.01.1970 UTC+0
   let Jan02_1970 = new Date(24 * 3600 * 1000);
   alert(Jan02_1970);

   // теперь отнимем 24 часа и получим 31.12.1969 UTC+0
   let Dec31_1969 = new Date(-24 * 3600 * 1000);
   alert(Dec31_1969);
   ```

3. `new Date(string)`. Если аргумент всего один, и это строка, то из неё «прочитывается» дата. Алгоритм разбора – такой же, как в Date.parse, который мы рассмотрим позже.

   ```js
   let date = new Date("2017-01-26");
   alert(date);
   ```

4. `Date.now()`. Если нужно просто измерить время, объект Date нам не нужен. Этот особый метод возвращает текущую метку времени. Семантически он эквивалентен new Date().getTime(), однако метод не создаёт промежуточный объект Date. Так что этот способ работает быстрее и не нагружает сборщик мусора. Данный метод используется из соображений удобства или когда важно быстродействие, например, при разработке игр на JavaScript или других специализированных приложений.

5. Существуют методы получения года, месяца и т.д. из объекта Date. Подробнее о них можно почитать в документации. **Все вышеперечисленные варианты возвращают значения в соответствии с местным часовым поясом.** Однако существуют и их UTC-варианты, возвращающие день, месяц, год для временной зоны UTC+0: `Date.getUTCFullYear()`, `Date.getUTCMonth()`, `Date.getUTCDay()`.

6. Помимо вышеприведённых методов, существуют два особых метода без UTC-варианта:

   - `Date.getTime()`. Для заданной даты возвращает таймстамп – количество миллисекунд, прошедших с 1 января 1970 года UTC+0.

   - `Date.getTimezoneOffset()`. Возвращает разницу в минутах между UTC и местным часовым поясом:

## Error

Обёртывание исключений является распространённой техникой: функция ловит низкоуровневые исключения и создаёт одно «высокоуровневое» исключение вместо разных низкоуровневых. Иногда низкоуровневые исключения становятся свойствами этого объекта, как err.cause в примерах выше, но это не обязательно.

```js
class ValidationError extends Error {
  constructor(message, cause) {
    super(message);
    this.cause = cause;
    this.name = "ValidationError";
  }
}

class PropertyRequiredError extends ValidationError {
  /* ... */
}

function validateUser(user) {
  if (!user.age) {
    throw new PropertyRequiredError("age");
  }

  if (!user.name) {
    throw new PropertyRequiredError("name");
  }
}

try {
  user = JSON.parse(json);
} catch (err) {
  if (err instanceof PropertyRequiredError) {
    console.log("Это поле обязательно для обработки!");
  } else {
    throw err;
  }
}
```
